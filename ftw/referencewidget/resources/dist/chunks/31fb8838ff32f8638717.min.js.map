{"version":3,"file":"chunks/31fb8838ff32f8638717.min.js","mappings":"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","sources":["webpack://referencewidget/./ftw/referencewidget/resources/src/widget/App.vue","webpack://referencewidget/./ftw/referencewidget/resources/src/widget/components/Pagination.vue","webpack://referencewidget/./ftw/referencewidget/resources/src/widget/components/Pagination.vue?1ecb","webpack://referencewidget/./ftw/referencewidget/resources/src/widget/components/searchForm.vue","webpack://referencewidget/./ftw/referencewidget/resources/src/widget/components/searchForm.vue?4cfa","webpack://referencewidget/./ftw/referencewidget/resources/src/widget/components/Breadcrumbs.vue","webpack://referencewidget/./ftw/referencewidget/resources/src/widget/components/Breadcrumbs.vue?c37a","webpack://referencewidget/./ftw/referencewidget/resources/src/widget/components/ListItems.vue","webpack://referencewidget/./ftw/referencewidget/resources/src/widget/components/ListItems.vue?ca47","webpack://referencewidget/./ftw/referencewidget/resources/src/widget/App.vue?2ef7","webpack://referencewidget/./ftw/referencewidget/resources/src/main.js"],"sourcesContent":["<template>\n  <div ref=\"root\">\n    <div class=\"widget-selected-items\">\n      <ul class=\"list-group\">\n        <li class=\"list-group-item\" v-for=\"item in selected\" :key=\"item\">\n          <input\n            type=\"checkbox\"\n            checked\n            :name=\"fieldName\"\n            :value=\"item.replace(portalURL, portalPath)\"\n          />\n          {{ item }}\n        </li>\n      </ul>\n    </div>\n    <button\n      type=\"button\"\n      class=\"btn btn-primary\"\n      data-bs-toggle=\"modal\"\n      :data-bs-target=\"`#${modalName}`\"\n    >\n      Browse\n    </button>\n    <div\n      :id=\"modalName\"\n      class=\"modal fade\"\n      tabindex=\"-1\"\n      aria-labelledby=\"ref-modal-title\"\n      aria-hidden=\"true\"\n      ref=\"modal\"\n    >\n      <div class=\"modal-dialog modal-dialog-scrollable modal-xl\">\n        <div class=\"modal-content\">\n          <div class=\"modal-header\">Choose content</div>\n          <div class=\"modal-body\">\n            <searchForm @search=\"search\" @reset=\"reset\" />\n            <Breadcrumbs\n              :breadcrumbs=\"breadcrumbs\"\n              :fetchData=\"fetchData\"\n              :portalURL=\"portalURL\"\n            />\n            <Pagination\n              v-if=\"data.batching\"\n              @next=\"fetchData\"\n              @previous=\"fetchData\"\n              :batching=\"data.batching\"\n            />\n            total {{ data.items_total }}\n\n            <ListItems\n              :fetchData=\"fetchData\"\n              :items=\"data.items\"\n              :selectedItems=\"selected\"\n              :inputType=\"inputType\"\n              :selectableTypes=\"selectableTypes\"\n              :traversableTypes=\"traversableTypes\"\n              @checked=\"updateSelected\"\n            />\n          </div>\n\n          <div class=\"modal-footer\">\n            <button\n              type=\"button\"\n              class=\"btn btn-secondary\"\n              data-bs-dismiss=\"modal\"\n            >\n              Close\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport Pagination from \"@/components/Pagination.vue\";\nimport SearchForm from \"@/components/searchForm.vue\";\nimport Breadcrumbs from \"@/components/Breadcrumbs.vue\";\nimport ListItems from \"@/components/ListItems.vue\";\nimport jQuery from \"jquery\";\n\nexport default {\n  components: {\n    Pagination,\n    SearchForm,\n    Breadcrumbs,\n    ListItems,\n  },\n  data() {\n    return {\n      portalURL: \"\",\n      baseURL: \"\",\n      startURL: \"\",\n      portalPath: \"\",\n      fieldName: \"\",\n      inputType: \"\",\n      translations: {},\n      data: {},\n      breadcrumbs: [],\n      selected: [],\n      selectableTypes: [],\n      traversableTypes: [],\n      formData: {\n        searchTerm: \"\",\n        sortOn: \"getObjPositionInParent\",\n        sortOrder: \"ascending\",\n      },\n    };\n  },\n  created() {\n    this.baseURL = document.body.getAttribute(\"data-base-url\");\n    this.portalURL = document.body.getAttribute(\"data-portal-url\");\n  },\n  mounted() {\n    const wrapperElement = this.$refs.root.parentElement;\n    this.startURL = wrapperElement.getAttribute(\"data-starturl\");\n    this.portalPath = wrapperElement.getAttribute(\"data-portalpath\");\n    this.fieldName = wrapperElement.getAttribute(\"data-fieldname\");\n    this.inputType = wrapperElement.getAttribute(\"data-inputtype\");\n    this.selectableTypes = JSON.parse(\n      wrapperElement.getAttribute(\"data-selectabletypes\")\n    );\n    this.traversableTypes = JSON.parse(\n      wrapperElement.getAttribute(\"data-traversabletypes\")\n    );\n    this.translations = JSON.parse(\n      wrapperElement.getAttribute(\"data-translations\")\n    );\n\n    this.loadSelectedItems(wrapperElement);\n\n    this.$refs.modal.addEventListener(\"show.bs.modal\", () => {\n      this.fetchData(this.startURL);\n    });\n  },\n  methods: {\n    async fetchData(url, options) {\n      let params = {\n        metadata_fields: [\"UID\", \"is_folderish\", \"portal_type\"],\n        sort_on: this.formData.sortOn,\n        sort_order: this.formData.sortOrder,\n      };\n\n      if (!url) {\n        url = this.data[\"@id\"];\n      }\n\n      const isSearch = url.indexOf(\"/@search\") != -1;\n\n      if (options) {\n        params = Object.assign(params, options);\n      }\n\n      if (!isSearch) {\n        params.expand = \"breadcrumbs\";\n      }\n\n      const response = await this.axios.get(url, { params: params });\n\n      this.data.items = response.data.items;\n      this.data.items_total = response.data.items_total;\n      this.data.batching = response.data.batching;\n\n      if (!isSearch) {\n        this.data[\"@id\"] = response.data[\"@id\"];\n      }\n      if (response.data[\"@components\"]) {\n        this.breadcrumbs = response.data[\"@components\"].breadcrumbs.items;\n      }\n    },\n    search(formData) {\n      this.formData = Object.assign({}, this.formData, formData);\n      const url = this.data[\"@id\"] + \"/@search\";\n      const currentURL = new URL(this.data[\"@id\"]);\n      let options = { \"path.query\": currentURL.pathname, \"path.depth\": 1 };\n      if (this.formData.searchTerm.length > 2) {\n        options.SearchableText = \"*\" + this.formData.searchTerm + \"*\";\n        options[\"path.depth\"] = -1;\n      }\n      this.fetchData(url, options);\n    },\n    reset(formData) {\n      this.formData = formData;\n      this.fetchData(this.startURL);\n    },\n    updateSelected(checked) {\n      this.selected = checked;\n      if (this.inputType == \"radio\") {\n        jQuery.fn.modal.Constructor.getInstance(this.$refs.modal).hide();\n      }\n    },\n    loadSelectedItems(wrapperElement) {\n      wrapperElement.parentElement\n        .querySelectorAll(\".selected_items input\")\n        .forEach((element) => {\n          this.selected.push(\n            this.portalURL + element.value.replace(this.portalPath, \"\")\n          );\n        });\n      wrapperElement.parentElement.querySelector(\".selected_items\").remove();\n    },\n  },\n  computed: {\n    modalName() {\n      return `reference-widget-modal-${this.fieldName.replace(/\\./g, \"_\")}`;\n    },\n  },\n};\n</script>\n","<template>\n  <nav aria-label=\"Pagination for this listing\" v-if=\"batching\">\n    <ul class=\"pagination\">\n      <li :class=\"batching.prev ? 'page-item' : 'page-item disabled'\">\n        <a href=\"#\" @click.prevent=\"triggerPrevious\" class=\"page-link\">\n          Previous\n        </a>\n      </li>\n      <li :class=\"batching.next ? 'page-item' : 'page-item disabled'\">\n        <a href=\"#\" @click.prevent=\"triggerNext\" class=\"page-link\"> Next </a>\n      </li>\n    </ul>\n  </nav>\n</template>\n<script>\nexport default {\n  props: {\n    batching: {\n      type: Object,\n      required: true,\n      default: () => {\n        return null;\n      },\n    },\n  },\n  methods: {\n    triggerNext() {\n      this.$emit(\"next\", this.batching.next);\n    },\n    triggerPrevious() {\n      this.$emit(\"previous\", this.batching.prev);\n    },\n  },\n};\n</script>\n","import { render } from \"./Pagination.vue?vue&type=template&id=74a4a50c\"\nimport script from \"./Pagination.vue?vue&type=script&lang=js\"\nexport * from \"./Pagination.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/maethu/webcloud7/wcs.simplelayout/sources/ftw.referencewidget/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <form\n    @submit.stop.prevent=\"search\"\n    class=\"row my-2 gy-2 gx-3 align-items-center\"\n  >\n    <div class=\"col\">\n      <div class=\"form-floating\">\n        <select\n          class=\"form-select\"\n          id=\"sortattr\"\n          aria-label=\"Sort attribute\"\n          v-model=\"sortOn\"\n          @change=\"() => search()\"\n        >\n          <template\n            v-for=\"(option, index) in sortAttribute\"\n            :key=\"option.value\"\n          >\n            <option :selected=\"index == 0\" :value=\"option.value\">\n              {{ option.title }}\n            </option>\n          </template>\n        </select>\n        <label for=\"sortattr\">Sort on</label>\n      </div>\n    </div>\n    <div class=\"col\">\n      <div class=\"form-floating\">\n        <select\n          class=\"form-select\"\n          id=\"sortorder\"\n          aria-label=\"Sort order\"\n          v-model=\"sortOrder\"\n          @change=\"() => search()\"\n        >\n          <option selected value=\"ascending\">Ascending</option>\n          <option selected value=\"descending\">Descending</option>\n        </select>\n        <label for=\"sortorder\">Sort order</label>\n      </div>\n    </div>\n    <div class=\"col\">\n      <div class=\"form-floating\">\n        <input\n          type=\"text\"\n          class=\"form-control\"\n          id=\"searchFilter\"\n          placeholder=\"Text\"\n          v-model=\"searchTerm\"\n        />\n        <label for=\"searchFilter\">Search</label>\n      </div>\n    </div>\n    <div class=\"col\">\n      <button type=\"submit\" class=\"btn btn-primary\">Search</button>\n      <button @click.stop.prevent=\"reset\" class=\"btn btn-danger\">\n        Reset\n      </button>\n    </div>\n  </form>\n</template>\n<script>\nexport default {\n  data() {\n    return {\n      searchTerm: \"\",\n      sortOn: \"getObjPositionInParent\",\n      sortOrder: \"ascending\",\n      sortAttribute: [\n        { title: \"Position\", value: \"getObjPositionInParent\" },\n        { title: \"Title\", value: \"sortable_title\" },\n        { title: \"Created\", value: \"created\" },\n        { title: \"Modified\", value: \"modified\" },\n      ],\n    };\n  },\n  methods: {\n    search() {\n      this.$emit(\"search\", {\n        searchTerm: this.searchTerm,\n        sortOn: this.sortOn,\n        sortOrder: this.sortOrder,\n      });\n    },\n    reset() {\n      this.$emit(\"reset\", {\n        searchTerm: \"\",\n        sortOn: \"getObjPositionInParent\",\n        sortOrder: \"ascending\",\n      });\n    },\n  },\n};\n</script>\n","import { render } from \"./searchForm.vue?vue&type=template&id=45593cbe\"\nimport script from \"./searchForm.vue?vue&type=script&lang=js\"\nexport * from \"./searchForm.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/maethu/webcloud7/wcs.simplelayout/sources/ftw.referencewidget/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <nav aria-label=\"breadcrumb\">\n    <ol class=\"breadcrumb\">\n      <li class=\"breadcrumb-item\">\n        <a :href=\"portalURL\" @click.prevent.stop=\"fetchData(portalURL)\"\n          >Startpage</a\n        >\n      </li>\n      <template v-for=\"(item, index) in breadcrumbs\" :key=\"item['@id0']\">\n        <li class=\"breadcrumb-item\" v-if=\"index != breadcrumbs.length - 1\">\n          <a :href=\"item['@id']\" @click.stop.prevent=\"fetchData(item['@id'])\">{{\n            item.title\n          }}</a>\n        </li>\n        <li v-else class=\"breadcrumb-item active\" aria-current=\"page\">\n          {{ item.title }}\n        </li>\n      </template>\n    </ol>\n  </nav>\n</template>\n<script>\nexport default {\n  props: {\n    breadcrumbs: {\n      type: Array,\n      required: true,\n      default: () => {\n        return [];\n      },\n    },\n    portalURL: {\n      type: String,\n      required: true,\n      default: () => {\n        return \"\";\n      },\n    },\n    fetchData: {\n      type: Function,\n      required: true,\n      default: () => {\n        return null;\n      },\n    },\n  },\n};\n</script>\n","import { render } from \"./Breadcrumbs.vue?vue&type=template&id=0034c91a\"\nimport script from \"./Breadcrumbs.vue?vue&type=script&lang=js\"\nexport * from \"./Breadcrumbs.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/maethu/webcloud7/wcs.simplelayout/sources/ftw.referencewidget/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <ul class=\"list-group\">\n    <template v-for=\"item in items\" :key=\"item.UID\">\n      <li class=\"list-group-item\">\n        <div class=\"form-check\">\n          <input\n            class=\"form-check-input me-1\"\n            :type=\"inputType\"\n            :value=\"item['@id']\"\n            :checked=\"item['@id'] in selectedProxy\"\n            :selected=\"item['@id'] in selectedProxy\"\n            v-model=\"selectedProxy\"\n            @change=\"checked\"\n            :disabled=\"selectableTypes.indexOf(item.portal_type) == -1\"\n          />\n          <label class=\"form-check-label\">\n            <a\n              v-if=\"\n                item.is_folderish &&\n                traversableTypes.indexOf(item.portal_type) != -1\n              \"\n              @click.prevent.stop=\"fetchData(item['@id'])\"\n              :href=\"item['@id']\"\n              class=\"list-group-item-action\"\n              >{{ item.title }}</a\n            >\n            <span v-else> {{ item.title }}</span>\n          </label>\n        </div>\n      </li>\n    </template>\n  </ul>\n</template>\n<script>\nexport default {\n  data() {\n    return {\n      selected: [],\n    };\n  },\n  props: {\n    items: {\n      type: Array,\n      required: true,\n      default: () => {\n        return [];\n      },\n    },\n    selectedItems: {\n      type: Array,\n      required: true,\n      default: () => {\n        return [];\n      },\n    },\n    inputType: {\n      type: String,\n      required: true,\n      default: () => {\n        return \"checkbox\";\n      },\n    },\n    selectableTypes: {\n      type: Array,\n      required: true,\n      default: () => {\n        return [];\n      },\n    },\n    traversableTypes: {\n      type: Array,\n      required: true,\n      default: () => {\n        return [];\n      },\n    },\n    fetchData: {\n      type: Function,\n      required: true,\n      default: () => {\n        return null;\n      },\n    },\n  },\n  mounted() {\n    this.selected = this.selectedItems;\n  },\n  methods: {\n    checked() {\n      this.$emit(\"checked\", this.selected);\n    },\n  },\n  computed: {\n    selectedProxy: {\n      get() {\n        return this.selected;\n      },\n      set(value) {\n        if (this.inputType == \"checkbox\") {\n          this.selected = value;\n        } else {\n          this.selected = [value];\n        }\n      },\n    },\n  },\n};\n</script>\n","import { render } from \"./ListItems.vue?vue&type=template&id=5678b698\"\nimport script from \"./ListItems.vue?vue&type=script&lang=js\"\nexport * from \"./ListItems.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/maethu/webcloud7/wcs.simplelayout/sources/ftw.referencewidget/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./App.vue?vue&type=template&id=98765568\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/maethu/webcloud7/wcs.simplelayout/sources/ftw.referencewidget/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import App from \"./widget/App.vue\";\nimport { createApp } from \"vue\";\nimport VueAxios from \"vue-axios\";\nimport axios from \"axios\";\nimport qs from \"qs\";\n\nfunction axiosInstance() {\n  const instance = axios.create({\n    paramsSerializer: (params) =>\n      qs.stringify(params, { arrayFormat: \"repeat\" }),\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\",\n      Prefer: \"return=representation\",\n    },\n  });\n  return instance;\n}\n\nfunction initReferenceWidget() {\n  document.querySelectorAll(\".reference-widget-app\").forEach((element) => {\n    if (element.classList.contains(\"initialized\")) {\n      return;\n    }\n\n    const app = createApp(App);\n    app.use(VueAxios, {\n      axios: axiosInstance(),\n    });\n    app.mount(element);\n    element.classList.add(\"initialized\");\n  });\n}\n\ninitReferenceWidget();\nwindow.initReferenceWidget = initReferenceWidget;\n"],"names":["ref","class","type","props","batching","Object","required","default","methods","triggerNext","this","$emit","next","triggerPrevious","prev","href","for","selected","value","data","searchTerm","sortOn","sortOrder","sortAttribute","title","search","reset","id","option","index","placeholder","breadcrumbs","Array","portalURL","String","fetchData","Function","item","length","items","selectedItems","inputType","selectableTypes","traversableTypes","mounted","checked","computed","selectedProxy","get","set","UID","disabled","indexOf","portal_type","components","Pagination","SearchForm","Breadcrumbs","ListItems","baseURL","startURL","portalPath","fieldName","translations","formData","created","document","body","getAttribute","wrapperElement","$refs","root","parentElement","JSON","parse","loadSelectedItems","modal","addEventListener","async","url","options","params","metadata_fields","sort_on","sort_order","isSearch","assign","expand","response","axios","items_total","URL","pathname","SearchableText","updateSelected","hide","querySelectorAll","forEach","element","push","replace","querySelector","remove","modalName","key","name","tabindex","initReferenceWidget","classList","contains","app","App","use","paramsSerializer","arrayFormat","headers","Accept","Prefer","mount","add","window"],"sourceRoot":""}